RewriteEngine On

# Redirect root to src/index.php
RewriteRule ^$ src/index.php [L]

# Redirect individual PHP files to their equivalents in src structure
RewriteRule ^login\.php$ src/views/login.php [L]
RewriteRule ^logout\.php$ src/views/logout.php [L]
RewriteRule ^admin\.php$ src/admin/index.php [L]
RewriteRule ^professor\.php$ src/views/professor.php [L]
RewriteRule ^student\.php$ src/views/student.php [L]
RewriteRule ^table\.php$ src/views/timetable_view.php [L]
RewriteRule ^timetable_view\.php$ src/views/timetable_view.php [L]

# Redirect API requests
RewriteRule ^get_timetable\.php$ src/api/get_timetable.php [L]
RewriteRule ^save_timetable\.php$ src/api/save_timetable.php [L]
RewriteRule ^publish_timetable\.php$ src/api/publish_timetable.php [L]
RewriteRule ^publish_all_timetables\.php$ src/api/publish_all_timetables.php [L]

# Redirect utility scripts
RewriteRule ^fix_passwords\.php$ src/utils/fix_passwords.php [L]
RewriteRule ^clear_timetables\.php$ src/utils/clear_timetables.php [L]
RewriteRule ^check_users\.php$ src/utils/check_users.php [L]

# Redirect static assets
RewriteRule ^style\.css$ src/assets/css/style.css [L]
RewriteRule ^main\.js$ src/assets/js/main.js [L]
RewriteRule ^images/(.*)$ src/assets/images/$1 [L]

# If the file exists in src, serve it directly
RewriteCond %{DOCUMENT_ROOT}/src/$1 -f
RewriteRule ^(.*)$ src/$1 [L] 